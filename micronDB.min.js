var micronDB=function(){return{db:[],hashTraverse:function(r,t){if(this.db[r]){for(var n=0;n<this.db[r].length;++n){var e=t(this.db[r][n]);if(e)return e}return!1}return!1},calcIndex:function(r){if(r){for(var t=0,n=0;n<r.length;++n)t+=r.charCodeAt(n);return t%50}return-1},exists:function(r){var t=this.calcIndex(r);return this.hashTraverse(t,function(t){return t.id==r})},makeID:function(){var r=new micronDB,t=0,n=8,e=function(){for(var r="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=0;n>e;++e)r+=t.charAt(Math.floor(Math.random()*t.length));return r},i=function(i){var h=function(){for(var h=62*Math.pow(n,2);r.exists(i)&&h>t;)++t,i=e()};return h(),r.exists(i)&&(n=Math.round(n/2+n),h()),i};return i(e())},hash:function(r){if(r.id=void 0===r.id?this.makeID():r.id,this.exists(r.id))return!1;var t=this.calcIndex(r.id);return this.db[t]?(this.db[t][this.db[t].length]=r,r):(this.db[t]=[],this.db[t][this.db[t].length]=r,r)},get:function(r){var t=this.calcIndex(r);return this.hashTraverse(t,function(t){return t.id==r?t:void 0})},remove:function(r){var t=this.calcIndex(r);if(this.db[t])for(var n=0;n<this.db[t].length;++n)if(this.db[t][n])return delete this.db[t][n]},match:{where:function(r,t){for(var n in t)if("undefined"!=typeof r[n])if("function"==typeof r[n]){if(r[n](t[n])===!0)return t}else if(t[n]==r[n])return t;return!1}},traverse:function(r,t,n){var e=function(r,n){for(var i=[],h=0;h<n.length;++h)if(Array.isArray(n[h])){var a=e(r,n[h]);a.length>0&&(Array.isArray(a)&&a.length<2?i[i.length]=a[0]:i[i.length]=a)}else t(r,n[h])&&(i[i.length]=t(r,n[h]));return i},i=[],h=0,a=function(r,t,n,a){"undefined"!=typeof n[a]&&"number"!=typeof a&&(h?i.length>0&&(i=e(r,i)):i=e(r,t)),++h},f=function(r,t,n,h){if("undefined"!=typeof n[h]&&"number"!=typeof h){var a=e(r,t);if(i.length>0)for(var f=function(r,t){for(var n=0;n<t.length;++n)if(t[n]==r)return!0;return!1},o=0;o<a.length;++o)f(a[o],i)||(i[i.length]=a[o]);else i=e(r,t)}};for(var o in r){"$and"==o&&(h=0);var u={};if(u[o]=r[o],"$or"==o||"$and"==o)for(var s in u[o]){var d={};d[s]=u[o][s],"$or"==o?f(d,n,u[o],s):a(d,n,u[o],s)}else a(u,n,r,o)}return i},insert:function(r){return this.hash(r)},query:function(r){var t;for(var n in r)"undefined"!=typeof this.match[n]&&(t=void 0===t?this.traverse(r[n],this.match[n],this.db):this.traverse(r[n],this.match[n],t));return t}}};
/*           )
c            (
o        )   )
p        (
y    .---------------------.
r    |        _____        |___      
i    |     .'`_,-._`'.      __ \
g    |    /  ( [ ] )  \    |  ||
h    |   /.-""`( )`""-.\   |  ||
t    |  ' <'```(.)```'> '  | _||
     |    <'```(.)```'>    |/ _/
2    |     <'``(.)``'>      ./
0    |      <``\_/``>      |
1    |       `'---'`       |
5    \github.com/trillobite/              
       \_________________/      Keep it black*/